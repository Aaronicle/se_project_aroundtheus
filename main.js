!function(){"use strict";var e=class{constructor(e,t,s){let{name:o,link:r}=e;this._handleImageClick=s,this._name=o,this._link=r,this._cardSelector=t}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._cardElement}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e,t){const s=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_isFormValid(){return this._inputs.every((e=>e.validity.valid))}_toggleButtonState(){this._isFormValid()?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):this.disableButton()}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputs=[...this._form.querySelectorAll(this._inputSelector)],this._toggleButtonState(),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}};const s={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class o{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}var r=class extends o{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputValues=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=s}_getInputValues(){const e={};return this._inputValues.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset(),this.close()})),super.setEventListeners()}close(){super.close()}};const n=document.querySelector("#profile-edit-btn"),i=document.querySelector("#profile-edit-modal"),l=document.querySelector("#profile-title"),a=document.querySelector("#profile-description"),c=document.querySelector("#card-add-modal"),u=document.querySelector("#add-button"),d=c.querySelector(".modal__form"),m=i.querySelector("#profile-edit-form");function p(t){const s=function(t){return new e(t,"#card-template",((e,t)=>{S.open({link:t,name:e})})).getView()}(t);_.addItem(s)}n.addEventListener("click",(()=>{const e=f.getUserInfo();l.value=e.profileName,a.value=e.profileJob,E.open()})),u.addEventListener("click",(()=>{h.open()}));const _=new class{constructor(e,t){let{items:s,renderer:o}=e;this.items=s,this.renderer=o,this._container=document.querySelector(t)}renderItems(){this.items.forEach((e=>{this.renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:p},".cards__list");_.renderItems();const h=new r({popupSelector:"#card-add-modal",handleFormSubmit:e=>{p(e),g.disableButton()}}),E=new r({popupSelector:"#profile-edit-modal",handleFormSubmit:e=>{f.setUserInfo(e)}}),S=new class extends o{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._image=this._popupElement.querySelector(".modal__image-popup"),this._caption=this._popupElement.querySelector(".modal__caption")}open(e){let{link:t,name:s}=e;this._image.src=t,this._image.alt=s,this._caption.textContent=s,super.open()}}({popupSelector:"#image-popup"});S.setEventListeners();const f=new class{constructor(e){let{profileNameSelector:t,profileJobSelector:s}=e;this._profileNameElement=document.querySelector(t),this._profileJobElement=document.querySelector(s)}getUserInfo(){return{profileName:this._profileNameElement.textContent,profileJob:this._profileJobElement.textContent}}setUserInfo(e){this._profileNameElement.textContent=e.title,this._profileJobElement.textContent=e.description}}({profileNameSelector:".profile__title",profileJobSelector:".profile__description"}),v=new t(s,m),g=new t(s,d);v.enableValidation(),g.enableValidation(),h.setEventListeners(),E.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vXCIuY2FyZF9fbGlrZS1idXR0b25cIlxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgICB9KTtcbiAgICAvL1wiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgfSk7XG4gICAgLy8uXCIuY2FyZF9faW1hZ2VcIlxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIC8vIGdldCB0aGUgY2FyZCB2aWV3XG4gICAgLy8gdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgLy8gdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICAvLyBzZXQgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAvLyByZXR1cm4gdGhlIGNhcmRcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIC8vIGNyZWF0ZSBhIHByaXZhdGUgbWVudGhvZCB0byBzaG93IGVycm9yXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgLy9jcmVhdGUgYSBwcml2YXRlIG1ldGhvZCB0byBoaWRlIGFuIGVycm9yXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gIH1cbiAgX2lzRm9ybVZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dHMuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCk7XG4gIH1cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9pc0Zvcm1WYWxpZCgpKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBkaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICAvLyB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICAvLyB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIC8vIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxzLCBzdWJtaXRCdXR0b24sIG9wdGlvbnMpO1xuICAgIC8vIGlucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAvLyAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChfZSkgPT4ge1xuICAgIC8vICAgICBjaGVja0lucHV0VmFsaWRpdHkodGhpcy5fZm9ybSwgaW5wdXRFbCwgb3B0aW9ucyk7XG4gICAgLy8gICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxzLCBzdWJtaXRCdXR0b24sIG9wdGlvbnMpO1xuICAgIC8vICAgfSk7XG4gICAgLy8gfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIC8vIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgIC8vICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgeyBpbml0aWFsQ2FyZHMsIGNvbmZpZyB9O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8vIGlzRXNjRXZlbnQoZXZ0LCBhY3Rpb24pIHtcblxuICAvLyAgICAgY29uc3QgYWN0aXZlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcbiAgLy8gICAgIGFjdGlvbihhY3RpdmVQb3B1cCk7XG4gIC8vICAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0VmFsdWVzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZpbGxlZElucHV0ID0ge307XG4gICAgdGhpcy5faW5wdXRWYWx1ZXMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGZpbGxlZElucHV0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZpbGxlZElucHV0O1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2VzIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlcy5qc1wiO1xuXG4vL0NvbnN0YW50c1xuXG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ0blwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIik7XG5jb25zdCBjYXJkQWRkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkLW1vZGFsXCIpO1xuY29uc3QgY2FyZEFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRBZGRGb3JtID0gY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWZvcm1cIik7XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCAobmFtZSwgbGluaykgPT4ge1xuICAgIGltYWdlUG9wdXAub3Blbih7IGxpbmssIG5hbWUgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZXRWaWV3KCk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgZGF0YSA9IHByb2ZpbGVVc2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IGRhdGEucHJvZmlsZU5hbWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZGF0YS5wcm9maWxlSm9iO1xuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNhcmRBZGRQb3B1cC5vcGVuKCk7XG59KTtcblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBuZXdDYXJkID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZERhdGEpO1xuICBjYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmQpO1xufVxuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7IGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5cbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG5cbmNvbnN0IGNhcmRBZGRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjY2FyZC1hZGQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICByZW5kZXJDYXJkKGRhdGEpO1xuICAgIGNhcmRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcbiAgfSxcbn0pO1xuXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gIH0sXG59KTtcblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZXMoe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNpbWFnZS1wb3B1cFwiLFxufSk7XG5cbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcHJvZmlsZVVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgcHJvZmlsZUpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxufSk7XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdEZvcm0pO1xuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNhcmRBZGRGb3JtKTtcblxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY2FyZEFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLml0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLnJlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZXMgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXBvcHVwXCIpO1xuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbiAgfVxuXG4gIG9wZW4oeyBsaW5rLCBuYW1lIH0pIHtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlcztcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlSm9iU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fcHJvZmlsZUpvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVKb2JTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvZmlsZU5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIHByb2ZpbGVKb2I6IHRoaXMuX3Byb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLnRpdGxlO1xuICAgIHRoaXMuX3Byb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50ID0gdXNlckRhdGEuZGVzY3JpcHRpb247XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaXNGb3JtVmFsaWQiLCJfaW5wdXRzIiwiZXZlcnkiLCJpbnB1dCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiZGlzYWJsZUJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImZvcm1TZWxlY3RvciIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2lucHV0VmFsdWVzIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmaWxsZWRJbnB1dCIsInZhbHVlIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiY2FyZEFkZE1vZGFsIiwiY2FyZEFkZEJ1dHRvbiIsImNhcmRBZGRGb3JtIiwicHJvZmlsZUVkaXRGb3JtIiwicmVuZGVyQ2FyZCIsImNhcmREYXRhIiwibmV3Q2FyZCIsIkNhcmQiLCJpbWFnZVBvcHVwIiwiZ2V0Q2FyZEVsZW1lbnQiLCJjYXJkTGlzdCIsImFkZEl0ZW0iLCJkYXRhIiwicHJvZmlsZVVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJwcm9maWxlRWRpdFBvcHVwIiwiY2FyZEFkZFBvcHVwIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXBXaXRoRm9ybSIsImNhcmRGb3JtVmFsaWRhdG9yIiwic2V0VXNlckluZm8iLCJfaW1hZ2UiLCJfY2FwdGlvbiIsIl9yZWYyIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVKb2JTZWxlY3RvciIsIl9wcm9maWxlTmFtZUVsZW1lbnQiLCJfcHJvZmlsZUpvYkVsZW1lbnQiLCJ1c2VyRGF0YSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9